## 如何进行分库分表
### 垂直拆分
基于领域模型做数据垂直拆分是一种最佳实践。比如将订单，用户，支付等领域模型划分到不同的DB数据库中。但是前提是这些库之间的join操作比较少，在这种情况下尽心分库会有较好的效果。

缺点：如果拆分之前，系统中很多列表和详情页是依赖SQL的join操作完成的。而拆分之后，数据库可能是分布在不同的主机上，这样join操作就会变得十分困难。
解决办法：
1. 建立全局表：对于系统中所有模块可能都会依赖的表，为了避免跨库join操作，可以考虑建立一个全局表。也就是将这些表在每个数据库中都保存一份。
2. 进行数据同步：用户库中的tab_a和订单库中的tab_b有关联，可以定时的将指定的表做同步。
3. 适当的进行数据冗余：比如订单表中，保存卖家ID的同时可以也保存卖家的用户名，这样查询订单详情时不用进行join操作

优点：
1. 拆分后业务逻辑更加清晰
2. 系统之间整合和扩展容易
3. 数据维护简单
   
### 水平拆分
当垂直拆分后遇到单机瓶颈，可以使用水平拆分。相对于垂直拆分，水平拆分是将同一张表拆分到不同的数据库中。